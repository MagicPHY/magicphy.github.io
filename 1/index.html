<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>元旦联欢会双人对战小游戏</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }
        
        body {
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
            /* 修改主色调为浅蓝色 */
            background: linear-gradient(135deg, #a1c4fd, #c2e9fb, #a1c4fd, #c2e9fb);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: #333;
            min-height: 100vh;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }
        
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background-color: rgba(255, 255, 255, 0.98);
            border-radius: 25px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            padding: 25px;
            position: relative;
            margin: 20px 0;
            border: 3px solid #3498db;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            /* 修改为浅蓝色边框 */
            border-bottom: 4px solid #3498db;
        }
        
        .header h1 {
            color: #2980b9; /* 修改为深蓝色 */
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.1);
        }
        
        .header p {
            color: #555;
            font-size: 1.3rem;
            font-weight: bold;
        }
        
        .game-mode-indicator {
            /* 修改为浅蓝色渐变 */
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-block;
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .main-area {
            display: flex;
            flex-direction: column;
        }
        
        .score-board {
            display: flex;
            justify-content: space-around;
            width: 100%;
            /* 修改为浅蓝色渐变 */
            background: linear-gradient(to right, #3498db, #2980b9);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .player {
            text-align: center;
            color: white;
            flex: 1;
            padding: 10px;
        }
        
        .player.active {
            position: relative;
            transform: scale(1.05);
            transition: transform 0.3s;
        }
        
        .player.active::after {
            content: "游戏中";
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: #3498db; /* 修改为浅蓝色 */
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 1rem;
            animation: pulse 1.5s infinite;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        .player-name {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .player-score {
            font-size: 3.5rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .game-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .game-option {
            padding: 15px 30px;
            /* 修改为浅蓝色渐变 */
            background: linear-gradient(to right, #3498db, #2980b9);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            font-size: 1.3rem;
            color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            border: none;
            min-width: 180px;
            text-align: center;
        }
        
        .game-option.active {
            /* 修改为更深的蓝色渐变 */
            background: linear-gradient(to right, #2980b9, #1c5a8a);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .game-container {
            width: 100%;
            background-color: #f8f9fa;
            border-radius: 20px;
            padding: 25px;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.05);
            position: relative;
            min-height: 500px;
            margin-bottom: 25px;
            border: 2px solid #e1f5fe;
        }
        
        .game-title {
            font-size: 2.2rem;
            color: #2980b9; /* 修改为深蓝色 */
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.1);
        }
        
        .game-instruction {
            font-size: 1.3rem;
            color: #555;
            margin-bottom: 25px;
            text-align: center;
            font-weight: bold;
        }
        
        /* 游戏1: 快速点击 - 双人同时模式 */
        .click-game-dual {
            display: flex;
            justify-content: space-between;
            width: 100%;
            gap: 30px;
        }
        
        .click-player-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            border-radius: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            min-height: 450px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        }
        
        .player1-area {
            border: 5px solid #3498db;
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.05), rgba(52, 152, 219, 0.1));
        }
        
        .player2-area {
            border: 5px solid #e74c3c;
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.05), rgba(231, 76, 60, 0.1));
        }
        
        /* 点击小球保持缩小后的尺寸 */
        .click-target {
            width: 80px;
            height: 80px;
            /* 修改为浅蓝色渐变 */
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.3);
            transition: all 0.2s;
            user-select: none;
            margin-bottom: 25px;
            position: absolute;
            z-index: 10;
        }
        
        .click-target:active {
            transform: scale(0.9);
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.2);
        }
        
        .click-area {
            width: 100%;
            height: 300px;
            border: 3px dashed #ccc;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            margin-bottom: 25px;
            background-color: #f0f8ff;
        }
        
        .click-area.player1-area-inner {
            border-color: #3498db;
        }
        
        .click-area.player2-area-inner {
            border-color: #e74c3c;
        }
        
        .timer-bar {
            width: 100%;
            height: 25px;
            background-color: #ecf0f1;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .timer-progress {
            height: 100%;
            /* 修改为浅蓝色渐变 */
            background: linear-gradient(to right, #3498db, #2980b9);
            width: 100%;
            transition: width 0.1s linear;
        }
        
        .player-score-display {
            font-size: 2rem;
            font-weight: bold;
            margin-top: 15px;
        }
        
        .player1-score {
            color: #3498db;
        }
        
        .player2-score {
            color: #e74c3c;
        }
        
        /* 游戏2: 颜色记忆 - 双人同时模式 */
        .memory-game-dual {
            display: flex;
            justify-content: space-between;
            width: 100%;
            gap: 30px;
        }
        
        .memory-player-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            border-radius: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            min-height: 450px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            position: relative;
        }
        
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-gap: 12px;
            margin-bottom: 25px;
            width: 100%;
            max-width: 500px;
        }
        
        .memory-card {
            width: 80px;
            height: 80px;
            /* 修改卡片背面为浅蓝色 */
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            cursor: pointer;
            user-select: none;
            transition: transform 0.6s;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            position: relative;
            transform-style: preserve-3d;
            perspective: 1000px;
        }
        
        /* 卡片背面样式 */
        .memory-card .card-back {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            backface-visibility: hidden;
            transform: rotateY(0deg);
            z-index: 2;
        }
        
        /* 卡片正面样式 */
        .memory-card .card-front {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            backface-visibility: hidden;
            transform: rotateY(180deg);
            z-index: 1;
        }
        
        /* 卡片翻转效果 */
        .memory-card.flipped {
            transform: rotateY(180deg);
        }
        
        .memory-card.matched {
            transform: scale(0.95);
            cursor: default;
            opacity: 0.7;
        }
        
        /* 记忆阶段卡片正面显示 */
        .memory-card.memory-phase {
            transform: rotateY(0deg);
        }
        
        .memory-card.memory-phase .card-front {
            transform: rotateY(0deg);
        }
        
        .memory-card.memory-phase .card-back {
            transform: rotateY(180deg);
        }
        
        .memory-progress {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        /* 新的记忆阶段倒计时 - 不遮挡卡片 */
        .memory-phase-timer {
            width: 100%;
            margin-bottom: 15px;
            text-align: center;
            padding: 10px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
            border: 2px solid #3498db;
        }
        
        .memory-phase-text {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .memory-countdown-display {
            font-size: 2.5rem;
            font-weight: bold;
            color: #e74c3c;
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .memory-timer-bar {
            width: 100%;
            height: 20px;
            background-color: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .memory-timer-progress {
            height: 100%;
            background: linear-gradient(to right, #3498db, #2980b9);
            width: 100%;
            transition: width 1s linear;
        }
        
        /* 控制区 */
        .controls {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 18px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.4rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            min-width: 200px;
            margin-bottom: 10px;
        }
        
        .btn-primary {
            /* 修改为浅蓝色渐变 */
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(to right, #9b59b6, #e74c3c);
            color: white;
        }
        
        .btn:active {
            transform: translateY(5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }
        
        .result-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 200;
            display: none;
        }
        
        .result-content {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            margin: 20px;
            border: 3px solid #3498db;
        }
        
        .result-title {
            font-size: 2.8rem;
            color: #2980b9;
            margin-bottom: 20px;
            text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.1);
        }
        
        .result-message {
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: #555;
        }
        
        .players-result {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
        }
        
        .player-result {
            text-align: center;
        }
        
        .player-result-name {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .player1-result .player-result-name {
            color: #3498db;
        }
        
        .player2-result .player-result-name {
            color: #e74c3c;
        }
        
        .player-result-score {
            font-size: 3rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .winner-name {
            font-size: 3rem;
            color: #2ecc71;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(39, 174, 96, 0.1));
            border-radius: 15px;
            border: 3px solid #2ecc71;
        }
        
        .footer {
            text-align: center;
            color: #666;
            font-size: 1rem;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px dashed #ccc;
        }
        
        /* 响应式调整 */
        @media (max-width: 1100px) {
            .game-container {
                min-height: 700px;
            }
            
            .click-game-dual, .memory-game-dual {
                flex-direction: column;
                gap: 30px;
            }
            
            .click-player-area, .memory-player-area {
                min-height: 350px;
            }
            
            .click-area {
                height: 250px;
            }
            
            .memory-phase-timer {
                padding: 8px;
            }
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2rem;
            }
            
            .player-score {
                font-size: 2.8rem;
            }
            
            .game-option {
                padding: 12px 20px;
                min-width: 150px;
                font-size: 1.1rem;
            }
            
            .game-title {
                font-size: 1.8rem;
            }
            
            .memory-card {
                width: 60px;
                height: 60px;
                font-size: 1.4rem;
            }
            
            .memory-grid {
                grid-gap: 8px;
            }
            
            .click-target {
                width: 70px;
                height: 70px;
                font-size: 2rem;
            }
            
            .btn {
                padding: 15px 25px;
                min-width: 160px;
                font-size: 1.2rem;
            }
            
            .controls {
                gap: 15px;
            }
            
            .memory-phase-text {
                font-size: 1.3rem;
            }
            
            .memory-countdown-display {
                font-size: 2rem;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 15px;
                border-radius: 15px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .game-option {
                padding: 10px 15px;
                min-width: 130px;
                font-size: 1rem;
            }
            
            .memory-card {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            .click-target {
                width: 60px;
                height: 60px;
                font-size: 1.8rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .memory-phase-text {
                font-size: 1.1rem;
            }
            
            .memory-countdown-display {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-gamepad"></i> 元旦联欢会双人对战小游戏</h1>
            <p>无需键盘，触摸屏操作，两名玩家同时对战</p>
            <div class="game-mode-indicator">
                <i class="fas fa-users"></i> 双人同时模式
            </div>
        </div>
        
        <div class="main-area">
            <div class="score-board">
                <div class="player active" id="player1">
                    <div class="player-name"><i class="fas fa-user"></i> 玩家1</div>
                    <div class="player-score" id="score1">0</div>
                </div>
                <div class="player active" id="player2">
                    <div class="player-name"><i class="fas fa-user"></i> 玩家2</div>
                    <div class="player-score" id="score2">0</div>
                </div>
            </div>
            
            <div class="game-selector">
                <button class="game-option active" data-game="1">快速点击</button>
                <button class="game-option" data-game="2">颜色记忆</button>
            </div>
            
            <div class="game-container">
                <!-- 游戏1: 快速点击 - 双人同时模式 -->
                <div id="game1" class="game-content">
                    <div class="game-title">快速点击游戏 - 双人同时模式</div>
                    <div class="game-instruction">两名玩家同时点击各自区域的圆球！在15秒内尽可能多地点击！圆球只会在各自区域的下半部分移动。</div>
                    
                    <div class="click-game-dual">
                        <div class="click-player-area player1-area">
                            <div class="player-name" style="color: #3498db; font-size: 1.6rem; margin-bottom: 15px;">玩家1区域</div>
                            <div class="click-area player1-area-inner" id="click-area-1">
                                <!-- 点击目标将在这里动态生成 -->
                            </div>
                            <div class="timer-bar">
                                <div class="timer-progress" id="click-timer-1"></div>
                            </div>
                            <div class="player-score-display player1-score">点击次数: <span id="click-count-1">0</span></div>
                        </div>
                        
                        <div class="click-player-area player2-area">
                            <div class="player-name" style="color: #e74c3c; font-size: 1.6rem; margin-bottom: 15px;">玩家2区域</div>
                            <div class="click-area player2-area-inner" id="click-area-2">
                                <!-- 点击目标将在这里动态生成 -->
                            </div>
                            <div class="timer-bar">
                                <div class="timer-progress" id="click-timer-2"></div>
                            </div>
                            <div class="player-score-display player2-score">点击次数: <span id="click-count-2">0</span></div>
                        </div>
                    </div>
                </div>
                
                <!-- 游戏2: 颜色记忆 - 双人同时模式 -->
                <div id="game2" class="game-content" style="display: none;">
                    <div class="game-title">颜色记忆游戏 - 双人同时模式</div>
                    <div class="game-instruction">两名玩家同时记忆并匹配各自区域的相同颜色！开局有10秒记忆时间，然后开始匹配！</div>
                    
                    <div class="memory-game-dual">
                        <div class="memory-player-area player1-area">
                            <!-- 新的记忆阶段倒计时 - 不遮挡卡片 -->
                            <div class="memory-phase-timer" id="memory-timer-1" style="display: none;">
                                <div class="memory-phase-text">记忆阶段 - 玩家1</div>
                                <div class="memory-countdown-display" id="memory-countdown-1">10</div>
                                <div class="memory-timer-bar">
                                    <div class="memory-timer-progress" id="memory-timer-progress-1"></div>
                                </div>
                            </div>
                            
                            <div class="player-name" style="color: #3498db; font-size: 1.6rem; margin-bottom: 15px;">玩家1区域</div>
                            <div class="memory-grid" id="memory-grid-1">
                                <!-- 记忆卡片将在这里动态生成 -->
                            </div>
                            <div class="memory-progress player1-score">匹配对数: <span id="match-count-1">0</span> / 8</div>
                        </div>
                        
                        <div class="memory-player-area player2-area">
                            <!-- 新的记忆阶段倒计时 - 不遮挡卡片 -->
                            <div class="memory-phase-timer" id="memory-timer-2" style="display: none;">
                                <div class="memory-phase-text">记忆阶段 - 玩家2</div>
                                <div class="memory-countdown-display" id="memory-countdown-2">10</div>
                                <div class="memory-timer-bar">
                                    <div class="memory-timer-progress" id="memory-timer-progress-2"></div>
                                </div>
                            </div>
                            
                            <div class="player-name" style="color: #e74c3c; font-size: 1.6rem; margin-bottom: 15px;">玩家2区域</div>
                            <div class="memory-grid" id="memory-grid-2">
                                <!-- 记忆卡片将在这里动态生成 -->
                            </div>
                            <div class="memory-progress player2-score">匹配对数: <span id="match-count-2">0</span> / 8</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <button class="btn btn-primary" id="start-btn">
                    <i class="fas fa-play"></i> 开始游戏
                </button>
                <button class="btn btn-secondary" id="reset-btn">
                    <i class="fas fa-redo"></i> 重置游戏
                </button>
                <button class="btn btn-primary" id="next-game-btn">
                    <i class="fas fa-forward"></i> 切换游戏
                </button>
            </div>
        </div>
        
        <div class="result-modal" id="result-modal">
            <div class="result-content">
                <div class="result-title">游戏结束!</div>
                <div class="result-message" id="result-message"></div>
                
                <div class="players-result">
                    <div class="player-result player1-result">
                        <div class="player-result-name">玩家1</div>
                        <div class="player-result-score" id="result-score-1">0</div>
                    </div>
                    <div class="player-result player2-result">
                        <div class="player-result-name">玩家2</div>
                        <div class="player-result-score" id="result-score-2">0</div>
                    </div>
                </div>
                
                <div class="winner-name" id="winner-name"></div>
                <button class="btn btn-primary" id="close-result-btn">
                    <i class="fas fa-trophy"></i> 确定
                </button>
            </div>
        </div>
        
        <div class="footer">
            <p>元旦联欢会专属游戏 | 专为触摸屏设计 | 双人同时模式 | 祝大家元旦快乐！</p>
        </div>
    </div>

    <script>
        // 游戏状态
        let currentGame = 1;
        let gameActive = false;
        
        // 玩家分数
        let player1Score = 0;
        let player2Score = 0;
        
        // 游戏1: 快速点击 - 修改时间为15秒
        let clickCount1 = 0;
        let clickCount2 = 0;
        let clickTimer1 = 15; // 修改为15秒
        let clickTimer2 = 15; // 修改为15秒
        let clickTimerInterval1;
        let clickTimerInterval2;
        let clickTarget1, clickTarget2;
        
        // 游戏2: 颜色记忆 - 修改记忆时间为10秒
        let memoryCards1 = [];
        let memoryCards2 = [];
        let flippedCards1 = [];
        let flippedCards2 = [];
        let matchedPairs1 = 0;
        let matchedPairs2 = 0;
        let memoryGameActive1 = false;
        let memoryGameActive2 = false;
        let memoryPhaseActive1 = true;
        let memoryPhaseActive2 = true;
        let memoryCountdown1 = 10; // 修改为10秒
        let memoryCountdown2 = 10; // 修改为10秒
        let memoryCountdownInterval1;
        let memoryCountdownInterval2;
        
        // DOM元素
        const score1El = document.getElementById('score1');
        const score2El = document.getElementById('score2');
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const nextGameBtn = document.getElementById('next-game-btn');
        const gameOptions = document.querySelectorAll('.game-option');
        const resultModal = document.getElementById('result-modal');
        const resultMessage = document.getElementById('result-message');
        const winnerName = document.getElementById('winner-name');
        const closeResultBtn = document.getElementById('close-result-btn');
        const resultScore1 = document.getElementById('result-score-1');
        const resultScore2 = document.getElementById('result-score-2');
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            initGame();
            setupEventListeners();
            createClickTargets();
            setupMemoryGames();
        });
        
        function initGame() {
            // 重置游戏状态
            updateScores();
        }
        
        function setupEventListeners() {
            // 游戏选择
            gameOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const gameId = parseInt(this.getAttribute('data-game'));
                    switchGame(gameId);
                });
            });
            
            // 开始游戏按钮
            startBtn.addEventListener('click', startGame);
            
            // 重置游戏按钮
            resetBtn.addEventListener('click', resetGame);
            
            // 切换游戏按钮
            nextGameBtn.addEventListener('click', function() {
                const nextGame = currentGame < 2 ? currentGame + 1 : 1;
                switchGame(nextGame);
            });
            
            // 关闭结果弹窗
            closeResultBtn.addEventListener('click', function() {
                resultModal.style.display = 'none';
            });
        }
        
        function switchGame(gameId) {
            currentGame = gameId;
            
            // 更新游戏选择UI
            gameOptions.forEach(option => {
                if (parseInt(option.getAttribute('data-game')) === gameId) {
                    option.classList.add('active');
                } else {
                    option.classList.remove('active');
                }
            });
            
            // 隐藏所有游戏，显示选中的游戏
            for (let i = 1; i <= 2; i++) {
                const gameEl = document.getElementById(`game${i}`);
                if (i === gameId) {
                    gameEl.style.display = 'block';
                } else {
                    gameEl.style.display = 'none';
                }
            }
            
            // 重置当前游戏
            resetGame();
            
            // 更新开始按钮文本
            startBtn.innerHTML = '<i class="fas fa-play"></i> 开始游戏';
        }
        
        function startGame() {
            if (gameActive) return;
            
            gameActive = true;
            startBtn.disabled = true;
            startBtn.innerHTML = '<i class="fas fa-pause"></i> 游戏中...';
            
            switch (currentGame) {
                case 1:
                    startGame1();
                    break;
                case 2:
                    startGame2();
                    break;
            }
        }
        
        function resetGame() {
            gameActive = false;
            startBtn.disabled = false;
            startBtn.innerHTML = '<i class="fas fa-play"></i> 开始游戏';
            
            switch (currentGame) {
                case 1:
                    resetGame1();
                    break;
                case 2:
                    resetGame2();
                    break;
            }
        }
        
        function updateScores() {
            score1El.textContent = player1Score;
            score2El.textContent = player2Score;
        }
        
        function addScore(player, points) {
            if (player === 1) {
                player1Score += points;
            } else {
                player2Score += points;
            }
            updateScores();
        }
        
        function showResult(message, winner = null) {
            resultScore1.textContent = player1Score;
            resultScore2.textContent = player2Score;
            resultMessage.textContent = message;
            
            if (winner === 1) {
                winnerName.textContent = `玩家1 获胜！`;
            } else if (winner === 2) {
                winnerName.textContent = `玩家2 获胜！`;
            } else if (winner === 0) {
                winnerName.textContent = `平局！`;
            } else {
                winnerName.textContent = '';
            }
            
            resultModal.style.display = 'flex';
        }
        
        // ========== 游戏1: 快速点击 ==========
        function createClickTargets() {
            // 创建玩家1的点击目标
            const clickArea1 = document.getElementById('click-area-1');
            clickTarget1 = document.createElement('div');
            clickTarget1.className = 'click-target';
            clickTarget1.innerHTML = '<i class="fas fa-bullseye"></i>';
            clickTarget1.id = 'click-target-1';
            clickArea1.appendChild(clickTarget1);
            
            // 创建玩家2的点击目标
            const clickArea2 = document.getElementById('click-area-2');
            clickTarget2 = document.createElement('div');
            clickTarget2.className = 'click-target';
            clickTarget2.innerHTML = '<i class="fas fa-bullseye"></i>';
            clickTarget2.id = 'click-target-2';
            clickArea2.appendChild(clickTarget2);
            
            // 为点击目标添加事件监听器
            clickTarget1.addEventListener('touchstart', function(e) {
                e.preventDefault();
                handleClick(1);
            });
            clickTarget1.addEventListener('mousedown', function() {
                handleClick(1);
            });
            
            clickTarget2.addEventListener('touchstart', function(e) {
                e.preventDefault();
                handleClick(2);
            });
            clickTarget2.addEventListener('mousedown', function() {
                handleClick(2);
            });
            
            // 初始化点击目标位置
            moveClickTarget(1);
            moveClickTarget(2);
        }
        
        function startGame1() {
            clickCount1 = 0;
            clickCount2 = 0;
            clickTimer1 = 15; // 修改为15秒
            clickTimer2 = 15; // 修改为15秒
            
            document.getElementById('click-count-1').textContent = clickCount1;
            document.getElementById('click-count-2').textContent = clickCount2;
            document.getElementById('click-timer-1').style.width = '100%';
            document.getElementById('click-timer-2').style.width = '100%';
            
            // 启动计时器
            clickTimerInterval1 = setInterval(function() {
                clickTimer1 -= 0.1;
                document.getElementById('click-timer-1').style.width = `${(clickTimer1 / 15) * 100}%`; // 修改分母为15
                
                if (clickTimer1 <= 0) {
                    clearInterval(clickTimerInterval1);
                    checkGame1End();
                }
            }, 100);
            
            clickTimerInterval2 = setInterval(function() {
                clickTimer2 -= 0.1;
                document.getElementById('click-timer-2').style.width = `${(clickTimer2 / 15) * 100}%`; // 修改分母为15
                
                if (clickTimer2 <= 0) {
                    clearInterval(clickTimerInterval2);
                    checkGame1End();
                }
            }, 100);
        }
        
        function resetGame1() {
            clearInterval(clickTimerInterval1);
            clearInterval(clickTimerInterval2);
            
            clickCount1 = 0;
            clickCount2 = 0;
            
            document.getElementById('click-count-1').textContent = clickCount1;
            document.getElementById('click-count-2').textContent = clickCount2;
            document.getElementById('click-timer-1').style.width = '100%';
            document.getElementById('click-timer-2').style.width = '100%';
            
            // 重置点击目标位置
            moveClickTarget(1);
            moveClickTarget(2);
        }
        
        function handleClick(player) {
            if (!gameActive || currentGame !== 1) return;
            
            if (player === 1) {
                clickCount1++;
                document.getElementById('click-count-1').textContent = clickCount1;
                moveClickTarget(1);
            } else {
                clickCount2++;
                document.getElementById('click-count-2').textContent = clickCount2;
                moveClickTarget(2);
            }
            
            // 添加点击效果
            const target = player === 1 ? clickTarget1 : clickTarget2;
            target.style.transform = 'scale(0.9)';
            setTimeout(() => {
                target.style.transform = 'scale(1)';
            }, 100);
        }
        
        function moveClickTarget(player) {
            const target = player === 1 ? clickTarget1 : clickTarget2;
            const area = player === 1 ? document.getElementById('click-area-1') : document.getElementById('click-area-2');
            const areaRect = area.getBoundingClientRect();
            
            // 限制圆球在区域的下半部分移动
            const maxX = areaRect.width - target.offsetWidth;
            // 只在下半部分：从高度的一半开始到高度减去目标高度
            const minY = areaRect.height / 2;
            const maxY = areaRect.height - target.offsetHeight;
            
            const randomX = Math.random() * maxX;
            const randomY = minY + Math.random() * (maxY - minY);
            
            target.style.left = `${randomX}px`;
            target.style.top = `${randomY}px`;
        }
        
        function checkGame1End() {
            // 检查两个玩家是否都结束了
            if (clickTimer1 > 0 || clickTimer2 > 0) return;
            
            gameActive = false;
            startBtn.disabled = false;
            startBtn.innerHTML = '<i class="fas fa-play"></i> 开始游戏';
            
            // 计算分数：每点击一次得1分
            addScore(1, clickCount1);
            addScore(2, clickCount2);
            
            // 确定获胜者
            let winner = null;
            let message = `玩家1点击了${clickCount1}次，玩家2点击了${clickCount2}次！`;
            
            if (clickCount1 > clickCount2) {
                winner = 1;
                message += ` 玩家1获胜！`;
            } else if (clickCount2 > clickCount1) {
                winner = 2;
                message += ` 玩家2获胜！`;
            } else {
                winner = 0;
                message += ` 平局！`;
            }
            
            // 显示结果
            showResult(message, winner);
        }
        
        // ========== 游戏2: 颜色记忆 ==========
        function setupMemoryGames() {
            setupMemoryGame(1);
            setupMemoryGame(2);
        }
        
        function setupMemoryGame(player) {
            // 创建记忆卡片 - 使用不同的颜色和图标
            const cardData = [
                { color: '#e74c3c', icon: 'fas fa-heart', text: '心' },
                { color: '#3498db', icon: 'fas fa-star', text: '星' },
                { color: '#2ecc71', icon: 'fas fa-circle', text: '圆' },
                { color: '#f1c40f', icon: 'fas fa-square', text: '方' },
                { color: '#9b59b6', icon: 'fas fa-moon', text: '月' },
                { color: '#1abc9c', icon: 'fas fa-sun', text: '日' },
                { color: '#e67e22', icon: 'fas fa-diamond', text: '钻' },
                { color: '#34495e', icon: 'fas fa-cloud', text: '云' }
            ];
            
            // 每种卡片有两张
            const cards = [...cardData, ...cardData];
            
            // 随机排序
            cards.sort(() => Math.random() - 0.5);
            
            // 创建卡片HTML
            const memoryGrid = document.getElementById(`memory-grid-${player}`);
            memoryGrid.innerHTML = '';
            
            const cardElements = [];
            
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'memory-card';
                cardElement.dataset.index = index;
                cardElement.dataset.player = player;
                cardElement.dataset.color = card.color;
                cardElement.dataset.icon = card.icon;
                cardElement.dataset.text = card.text;
                
                // 创建卡片背面
                const cardBack = document.createElement('div');
                cardBack.className = 'card-back';
                cardBack.innerHTML = '<i class="fas fa-question"></i>';
                cardElement.appendChild(cardBack);
                
                // 创建卡片正面 - 修复：显示原内容
                const cardFront = document.createElement('div');
                cardFront.className = 'card-front';
                cardFront.style.backgroundColor = card.color;
                cardFront.innerHTML = `<i class="${card.icon}"></i><span style="font-size: 0.8rem; margin-left: 5px;">${card.text}</span>`;
                cardElement.appendChild(cardFront);
                
                cardElement.addEventListener('click', function() {
                    if (!gameActive || currentGame !== 2) return;
                    if (player === 1 && !memoryGameActive1) return;
                    if (player === 2 && !memoryGameActive2) return;
                    if (player === 1 && memoryPhaseActive1) return;
                    if (player === 2 && memoryPhaseActive2) return;
                    flipCard(this);
                });
                
                memoryGrid.appendChild(cardElement);
                cardElements.push({
                    element: cardElement,
                    color: card.color,
                    icon: card.icon,
                    text: card.text,
                    flipped: false,
                    matched: false
                });
            });
            
            if (player === 1) {
                memoryCards1 = cardElements;
            } else {
                memoryCards2 = cardElements;
            }
        }
        
        function startGame2() {
            matchedPairs1 = 0;
            matchedPairs2 = 0;
            memoryGameActive1 = true;
            memoryGameActive2 = true;
            memoryPhaseActive1 = true;
            memoryPhaseActive2 = true;
            memoryCountdown1 = 10; // 修改为10秒
            memoryCountdown2 = 10; // 修改为10秒
            
            document.getElementById('match-count-1').textContent = matchedPairs1;
            document.getElementById('match-count-2').textContent = matchedPairs2;
            
            // 显示记忆阶段计时器
            document.getElementById('memory-timer-1').style.display = 'block';
            document.getElementById('memory-timer-2').style.display = 'block';
            
            // 重置所有卡片 - 在记忆阶段显示正面
            memoryCards1.forEach(card => {
                card.element.classList.remove('flipped', 'matched');
                // 显示卡片正面（记忆阶段）
                card.element.classList.add('memory-phase');
                card.flipped = false;
                card.matched = false;
            });
            
            memoryCards2.forEach(card => {
                card.element.classList.remove('flipped', 'matched');
                // 显示卡片正面（记忆阶段）
                card.element.classList.add('memory-phase');
                card.flipped = false;
                card.matched = false;
            });
            
            flippedCards1 = [];
            flippedCards2 = [];
            
            // 启动记忆阶段倒计时
            startMemoryPhase();
        }
        
        function startMemoryPhase() {
            // 重置进度条
            document.getElementById('memory-timer-progress-1').style.width = '100%';
            document.getElementById('memory-timer-progress-2').style.width = '100%';
            
            memoryCountdownInterval1 = setInterval(function() {
                memoryCountdown1--;
                document.getElementById('memory-countdown-1').textContent = memoryCountdown1;
                document.getElementById('memory-timer-progress-1').style.width = `${(memoryCountdown1 / 10) * 100}%`;
                
                if (memoryCountdown1 <= 0) {
                    clearInterval(memoryCountdownInterval1);
                    endMemoryPhase(1);
                }
            }, 1000);
            
            memoryCountdownInterval2 = setInterval(function() {
                memoryCountdown2--;
                document.getElementById('memory-countdown-2').textContent = memoryCountdown2;
                document.getElementById('memory-timer-progress-2').style.width = `${(memoryCountdown2 / 10) * 100}%`;
                
                if (memoryCountdown2 <= 0) {
                    clearInterval(memoryCountdownInterval2);
                    endMemoryPhase(2);
                }
            }, 1000);
        }
        
        function endMemoryPhase(player) {
            if (player === 1) {
                memoryPhaseActive1 = false;
                document.getElementById('memory-timer-1').style.display = 'none';
                
                // 修复：翻转卡片到背面
                memoryCards1.forEach(card => {
                    card.element.classList.remove('memory-phase');
                    card.element.classList.add('flipped');
                });
            } else {
                memoryPhaseActive2 = false;
                document.getElementById('memory-timer-2').style.display = 'none';
                
                // 修复：翻转卡片到背面
                memoryCards2.forEach(card => {
                    card.element.classList.remove('memory-phase');
                    card.element.classList.add('flipped');
                });
            }
            
            // 检查是否两个玩家都结束了记忆阶段
            if (!memoryPhaseActive1 && !memoryPhaseActive2) {
                console.log("记忆阶段结束，游戏正式开始");
            }
        }
        
        function resetGame2() {
            // 清除倒计时
            clearInterval(memoryCountdownInterval1);
            clearInterval(memoryCountdownInterval2);
            
            // 重置游戏2
            matchedPairs1 = 0;
            matchedPairs2 = 0;
            memoryGameActive1 = true;
            memoryGameActive2 = true;
            memoryPhaseActive1 = true;
            memoryPhaseActive2 = true;
            memoryCountdown1 = 10; // 重置为10秒
            memoryCountdown2 = 10; // 重置为10秒
            
            document.getElementById('match-count-1').textContent = matchedPairs1;
            document.getElementById('match-count-2').textContent = matchedPairs2;
            
            // 隐藏记忆阶段计时器
            document.getElementById('memory-timer-1').style.display = 'none';
            document.getElementById('memory-timer-2').style.display = 'none';
            
            // 重新设置卡片
            setupMemoryGame(1);
            setupMemoryGame(2);
        }
        
        function flipCard(cardElement) {
            if (!gameActive || currentGame !== 2) return;
            
            const player = parseInt(cardElement.dataset.player);
            const cardIndex = parseInt(cardElement.dataset.index);
            
            let cards, flippedCards, matchedPairs, memoryGameActive;
            if (player === 1) {
                cards = memoryCards1;
                flippedCards = flippedCards1;
                matchedPairs = matchedPairs1;
                memoryGameActive = memoryGameActive1;
            } else {
                cards = memoryCards2;
                flippedCards = flippedCards2;
                matchedPairs = matchedPairs2;
                memoryGameActive = memoryGameActive2;
            }
            
            if (!memoryGameActive) return;
            
            const card = cards[cardIndex];
            
            // 如果卡片已经翻开或已匹配，则忽略
            if (card.flipped || card.matched) return;
            
            // 如果已经翻开了两张卡片，则忽略新的点击
            if (flippedCards.length >= 2) return;
            
            // 翻开卡片 - 修复：翻转后显示卡片正面内容
            card.element.classList.remove('flipped');
            card.flipped = true;
            flippedCards.push(card);
            
            // 如果翻开了两张卡片
            if (flippedCards.length === 2) {
                // 检查是否匹配 - 比较颜色和图标
                if (flippedCards[0].color === flippedCards[1].color && 
                    flippedCards[0].icon === flippedCards[1].icon) {
                    // 匹配成功
                    flippedCards[0].matched = true;
                    flippedCards[1].matched = true;
                    flippedCards[0].element.classList.add('matched');
                    flippedCards[1].element.classList.add('matched');
                    
                    matchedPairs++;
                    
                    if (player === 1) {
                        matchedPairs1 = matchedPairs;
                        document.getElementById('match-count-1').textContent = matchedPairs1;
                    } else {
                        matchedPairs2 = matchedPairs;
                        document.getElementById('match-count-2').textContent = matchedPairs2;
                    }
                    
                    // 清空已翻开的卡片数组
                    if (player === 1) {
                        flippedCards1 = [];
                    } else {
                        flippedCards2 = [];
                    }
                    
                    // 检查是否完成游戏
                    if (matchedPairs === 8) {
                        // 玩家完成游戏
                        if (player === 1) {
                            memoryGameActive1 = false;
                        } else {
                            memoryGameActive2 = false;
                        }
                        
                        // 检查两个玩家是否都完成了
                        checkGame2End();
                    }
                } else {
                    // 不匹配，稍后翻回去 - 修复：不匹配时也保持显示正面内容
                    setTimeout(() => {
                        // 两张卡片都翻回去
                        flippedCards[0].element.classList.add('flipped');
                        flippedCards[0].flipped = false;
                        
                        flippedCards[1].element.classList.add('flipped');
                        flippedCards[1].flipped = false;
                        
                        // 清空已翻开的卡片数组
                        if (player === 1) {
                            flippedCards1 = [];
                        } else {
                            flippedCards2 = [];
                        }
                    }, 1000); // 保持显示1秒后翻回
                }
            }
        }
        
        function checkGame2End() {
            // 检查两个玩家是否都完成了
            if (memoryGameActive1 || memoryGameActive2) return;
            
            gameActive = false;
            startBtn.disabled = false;
            startBtn.innerHTML = '<i class="fas fa-play"></i> 开始游戏';
            
            // 计算分数：每匹配一对得5分
            const points1 = matchedPairs1 * 5;
            const points2 = matchedPairs2 * 5;
            
            addScore(1, points1);
            addScore(2, points2);
            
            // 确定获胜者
            let winner = null;
            let message = `玩家1匹配了${matchedPairs1}对，玩家2匹配了${matchedPairs2}对！`;
            
            if (matchedPairs1 > matchedPairs2) {
                winner = 1;
                message += ` 玩家1获胜！`;
            } else if (matchedPairs2 > matchedPairs1) {
                winner = 2;
                message += ` 玩家2获胜！`;
            } else {
                winner = 0;
                message += ` 平局！`;
            }
            
            // 显示结果
            showResult(message, winner);
        }
    </script>
</body>
</html>